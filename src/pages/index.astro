---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import NovelCard from '../components/NovelCard.astro';
import { getLatestUpdates, getPopularNovels, getTopRatedNovels, novels } from '../data/novels';

const latestUpdates = getLatestUpdates(12);
const popularNovels = getPopularNovels(6);
const topRated = getTopRatedNovels(6);
const featuredNovel = novels[0]; // First novel as featured
---

<Layout title="Home">
  <div class="page-wrapper">
    <Header />
    
    <main class="main">
      <!-- Hero Section -->
      <section class="hero">
        <div class="hero-content">
          <div class="hero-text">
            <h1 class="hero-title">
              Read Your Favorite Novels<br />
              <span class="hero-highlight">Anytime, Anywhere</span>
            </h1>
            <p class="hero-description">
              Discover thousands of novels from various genres. From fantasy to romance, from action to slice of life.
              All free and updated daily.
            </p>
            <div class="hero-actions">
              <a href="/popular" class="btn btn-primary btn-lg">
                Start Reading
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <line x1="5" y1="12" x2="19" y2="12"></line>
                  <polyline points="12 5 19 12 12 19"></polyline>
                </svg>
              </a>
              <a href="/latest" class="btn btn-outline btn-lg">
                Latest Updates
              </a>
            </div>
          </div>
          <div class="hero-featured">
            <a href={`/novel/${featuredNovel.id}`} class="featured-card">
              <img
                src={featuredNovel.cover}
                alt={featuredNovel.title}
                width={400}
                height={250}
                loading="eager"
                decoding="async"
                class="featured-cover"
              />
              <div class="featured-info">
                <span class="featured-label">Featured Novel</span>
                <h2 class="featured-title">{featuredNovel.title}</h2>
                <p class="featured-author">by {featuredNovel.author}</p>
                <p class="featured-description">{featuredNovel.description}</p>
                <div class="featured-meta">
                  <span class="featured-rating">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="#f59e0b">
                      <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
                    </svg>
                    {featuredNovel.rating}
                  </span>
                  <span class="featured-genres">
                    {featuredNovel.genres.slice(0, 3).join(' â€¢ ')}
                  </span>
                </div>
              </div>
            </a>
          </div>
        </div>
      </section>

      <!-- Latest Updates Section -->
      <section class="section">
        <div class="container">
          <div class="section-header">
            <h2 class="section-title">Latest Updates</h2>
            <a href="/latest" class="view-all">
              View All
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="9 18 15 12 9 6"></polyline>
              </svg>
            </a>
          </div>
          <div class="novels-grid grid grid-6">
            {latestUpdates.map(novel => (
              <NovelCard novel={novel} />
            ))}
          </div>
        </div>
      </section>

      <!-- Popular Section -->
      <section class="section section-alt">
        <div class="container">
          <div class="section-header">
            <h2 class="section-title">Most Popular</h2>
            <a href="/popular" class="view-all">
              View All
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="9 18 15 12 9 6"></polyline>
              </svg>
            </a>
          </div>
          <div class="popular-grid">
            {popularNovels.map((novel, index) => (
              <a href={`/novel/${novel.id}`} class="popular-item">
                <span class="popular-rank">{index + 1}</span>
                <img
                  src={novel.cover}
                  alt={novel.title}
                  width={120}
                  height={160}
                  loading="lazy"
                  decoding="async"
                  class="popular-cover"
                />
                <div class="popular-info">
                  <h3 class="popular-title">{novel.title}</h3>
                  <p class="popular-author">{novel.author}</p>
                  <div class="popular-meta">
                    <span class="popular-rating">
                      <svg width="12" height="12" viewBox="0 0 24 24" fill="#f59e0b">
                        <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
                      </svg>
                      {novel.rating}
                    </span>
                    <span class="popular-chapters">{novel.chapters.length} Chapters</span>
                  </div>
                </div>
              </a>
            ))}
          </div>
        </div>
      </section>

      <!-- Top Rated Section -->
      <section class="section">
        <div class="container">
          <div class="section-header">
            <h2 class="section-title">Top Rated</h2>
            <a href="/popular" class="view-all">
              View All
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="9 18 15 12 9 6"></polyline>
              </svg>
            </a>
          </div>
          <div class="novels-grid grid grid-6">
            {topRated.map(novel => (
              <NovelCard novel={novel} />
            ))}
          </div>
        </div>
      </section>

      <!-- Stats Section -->
      <section class="section section-stats">
        <div class="container">
          <div class="stats-grid">
            <div class="stat-item">
              <span class="stat-number">{novels.length}+</span>
              <span class="stat-label">Novels</span>
            </div>
            <div class="stat-item">
              <span class="stat-number">{novels.reduce((acc, n) => acc + n.chapters.length, 0)}+</span>
              <span class="stat-label">Chapters</span>
            </div>
            <div class="stat-item">
              <span class="stat-number">15+</span>
              <span class="stat-label">Genres</span>
            </div>
            <div class="stat-item">
              <span class="stat-number">24/7</span>
              <span class="stat-label">Updates</span>
            </div>
          </div>
        </div>
      </section>
    </main>

    <Footer />
  </div>
</Layout>

<style>
  .page-wrapper {
    display: flex;
    flex-direction: column;
    min-height: 100vh;
  }

  .main {
    flex: 1;
  }

  /* Hero Section */
  .hero {
    background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-primary) 100%);
    padding: 3rem 1rem;
  }

  @media (min-width: 768px) {
    .hero {
      padding: 4rem 2rem;
    }
  }

  .hero-content {
    max-width: 1280px;
    margin: 0 auto;
    display: grid;
    grid-template-columns: 1fr;
    gap: 2rem;
    align-items: center;
  }

  @media (min-width: 1024px) {
    .hero-content {
      grid-template-columns: 1fr 1.2fr;
    }
  }

  .hero-title {
    font-size: 2rem;
    font-weight: 800;
    line-height: 1.2;
    margin-bottom: 1rem;
  }

  @media (min-width: 768px) {
    .hero-title {
      font-size: 2.75rem;
    }
  }

  .hero-highlight {
    background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .hero-description {
    font-size: 1rem;
    color: var(--text-secondary);
    line-height: 1.7;
    margin-bottom: 1.5rem;
  }

  .hero-actions {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
  }

  /* Featured Card */
  .featured-card {
    display: flex;
    flex-direction: column;
    background-color: var(--card-bg);
    border-radius: 1rem;
    overflow: hidden;
    box-shadow: var(--shadow-lg);
    transition: all 0.3s ease;
  }

  @media (min-width: 768px) {
    .featured-card {
      flex-direction: row;
    }
  }

  .featured-card:hover {
    box-shadow: var(--shadow-lg);
    transform: translateY(-4px);
  }

  .featured-cover {
    width: 100%;
    height: 250px;
    object-fit: cover;
  }

  @media (min-width: 768px) {
    .featured-cover {
      width: 200px;
      height: auto;
    }
  }

  .featured-info {
    padding: 1.5rem;
    flex: 1;
  }

  .featured-label {
    display: inline-block;
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--accent-primary);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: 0.5rem;
  }

  .featured-title {
    font-size: 1.25rem;
    font-weight: 700;
    margin-bottom: 0.25rem;
  }

  .featured-author {
    font-size: 0.875rem;
    color: var(--text-muted);
    margin-bottom: 1rem;
  }

  .featured-description {
    font-size: 0.875rem;
    color: var(--text-secondary);
    line-height: 1.6;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
    margin-bottom: 1rem;
  }

  .featured-meta {
    display: flex;
    align-items: center;
    gap: 1rem;
    flex-wrap: wrap;
  }

  .featured-rating {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    font-weight: 600;
    color: #f59e0b;
  }

  .featured-genres {
    font-size: 0.75rem;
    color: var(--text-muted);
  }

  /* Sections */
  .section {
    padding: 3rem 0;
  }

  .section-alt {
    background-color: var(--bg-secondary);
  }

  .section-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 1.5rem;
  }

  .view-all {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--accent-primary);
    transition: gap 0.2s ease;
  }

  .view-all:hover {
    gap: 0.5rem;
  }

  .novels-grid {
    display: grid;
    gap: 1.5rem;
  }

  /* Popular Grid */
  .popular-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 1rem;
  }

  @media (min-width: 768px) {
    .popular-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (min-width: 1024px) {
    .popular-grid {
      grid-template-columns: repeat(3, 1fr);
    }
  }

  .popular-item {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1rem;
    background-color: var(--card-bg);
    border-radius: 0.75rem;
    box-shadow: var(--shadow-sm);
    transition: all 0.2s ease;
  }

  .popular-item:hover {
    box-shadow: var(--shadow-md);
    transform: translateX(4px);
  }

  .popular-rank {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 2rem;
    height: 2rem;
    background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
    color: white;
    font-weight: 700;
    font-size: 0.875rem;
    border-radius: 50%;
    flex-shrink: 0;
  }

  .popular-cover {
    width: 60px;
    height: 80px;
    object-fit: cover;
    border-radius: 0.5rem;
    flex-shrink: 0;
  }

  .popular-info {
    flex: 1;
    min-width: 0;
  }

  .popular-title {
    font-size: 0.875rem;
    font-weight: 600;
    margin-bottom: 0.25rem;
    display: -webkit-box;
    -webkit-line-clamp: 1;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .popular-author {
    font-size: 0.75rem;
    color: var(--text-muted);
    margin-bottom: 0.5rem;
  }

  .popular-meta {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    font-size: 0.75rem;
    color: var(--text-secondary);
  }

  .popular-rating {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    color: #f59e0b;
  }

  /* Stats Section */
  .section-stats {
    background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
    padding: 3rem 1rem;
  }

  .stats-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 2rem;
    max-width: 800px;
    margin: 0 auto;
    text-align: center;
  }

  @media (min-width: 768px) {
    .stats-grid {
      grid-template-columns: repeat(4, 1fr);
    }
  }

  .stat-item {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
  }

  .stat-number {
    font-size: 2rem;
    font-weight: 800;
    color: white;
  }

  @media (min-width: 768px) {
    .stat-number {
      font-size: 2.5rem;
    }
  }

  .stat-label {
    font-size: 0.875rem;
    color: rgba(255, 255, 255, 0.8);
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }
</style>
